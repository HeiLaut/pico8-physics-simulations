pico-8 cartridge // http://www.pico-8.com
version 34
__lua__
function _init()
cls()
 oil= {} -- liste mit aktiven oel
 create_oil(5)
 t = {}
 u = 0
 scene = "intro"
 --daten:
 -- dichte 900 kg/m3
 -- plattenabstand 5e-3
 -- abstand raster 2,72e-5
end

function _update()
 if scene == "sim" then
  foreach(oil,update_oil)
  control()
 else
  menu_steuerung()
 end
end

function _draw()
 
 if scene == "data" then
  cls()
 	draw_data()
 elseif scene == "intro" then
  cls()
  draw_menu()
 elseif scene == "sim" then
  cls()
  map(0,0)
  foreach(oil,draw_oil)
  draw_current()
  draw_time()
 end
end
-->8
-- daten oeltroepfchen
function create_oil(x)
	local n = {1.1,2.2,3.3,4.5,5.5,6.7,7.8,8.8,10,11.2}
	for i = 1, x do
		local o = {}
		o.r = 5--rnd()*2+3.5
		o.n = n[flr(rnd(#n)+1)]
		o.x = rnd(120)+4
		o.y = rnd(50)+10
		o.dr = rnd(3) --drawradius
		add(oil,o)
	end
end
-->8
-- update and draw functions

function update_oil(e)
 e.auf = (3.2*abs(u)*e.n-3.6983*e.r*e.r*e.r)/(3.3929*e.r)/10
 e.ab = (3.2*abs(u)*e.n+3.6983*e.r*e.r*e.r)/(3.3929*e.r)/10
 if(u > 0) then
  e.y += e.ab/10
 elseif(u < 0) then
  e.y -= e.auf/10
 else
  e.y += e.ab/10
 end
 if(e.y>200 or e.y< -100)then
   del(o,e)
 end
end

function draw_oil(e)
 circfill(e.x,e.y,e.dr,14)
 --print(e.ab,e.x+5,e.y+5,10)
 --print(e.auf,e.x-10,e.y-5,12)
end

-->8
function control()
 local u_max  = 300
 if(abs(u) <= u_max)then
  if(btn(2))then
	  u +=1
	  sfx(1)
	 end
	 if(btn(3))then
	  u -=1
	  	  sfx(1)
	 end
	 if(btnp(1))then
	  if(u%5 != 0)then
		  u = flr(u/10)*10
		 end
	  u +=5
	  	  sfx(1)
	 end
	 if(btnp(0))then
	 if(u%5 != 0)then
		  u = flr(u/10)*10
		 end
	  u -=5
	  	  sfx(1)
	 end
	elseif(u>u_max)then
	 u = u_max
	elseif(u<-u_max)then
	 u = -u_max	 	 
	end
 if(btnp(4))then
  create_oil(5)
  sfx(0)
 end
 if(btnp(5)and not p)then
  u = -u
  sfx(2)
  add(t,time())
 end
end

function draw_current()
	print(u,10,10,15)
	print("v",28,10,15)
end

function draw_time()
 if #t == 7 then
  del(t,t[1])
 end
  for i = 2, #t do
  local dt = flr((t[i]-t[i-1])*100)/100
  print(dt,100,50-i*6,10)
  print("S",120,50-i*6,10)
 end
 local t1 = 0
 if #t>0 then
  t1 = t[#t]
 end
 print(flr((time()-t1)*100)/100,100,110,10)
 print("S", 120,110,10)
end
-->8
--menu
function draw_menu()
 print("der milikan-versuch",30,10,7)
 print("…………………………",28,17,7)
 print("steuerung:",20,30,8)
 print("⬆️⬇️⬅️➡️ - spannung regeln",20,40,18)
 print("x - spannung umpolen",20,50,18 )
 print(" und uhr start/stopp",31,60,18)
 print("c - oel spruehen",20,70,18)
 print("p - pause/menu",20,80,18)
 print("weiter mit x",40,100,10)
end

function menu_steuerung()
 if btnp(5) and scene == "intro" then
  scene = "data"
 elseif btnp(5) and scene == "data" then
  scene = "sim"
 end
end

function draw_data()
  print("versuchsdaten",40,10,8)

  print("dichte oel: 900 kg/m^3",10,40,18)
  print("viskositaet: 18e-6 kg/(ms)",10,50,18 )
  print("plattenabstand: 5e-3 m",10,60,18)
  print("skalenabstand: 2.72e-5 m",10,70,18)
  print("weiter mit x",40,100,10)

end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000666666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666666666666000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000fff0fff00000000000f0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000f0f0000000000000f0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000ff0fff00000000000f0f000000000000000000000000000000000000000000000000000000000000000000000aaa00000aa00aaa0000000000000
000000000000f000f00000000000fff00000000000000000000000000000000000000000000000000000000000000000000000a000000a0000a0000000000000
0000000000fff0fff000000000000f0000000000000000000000000000000000000000000000000000000000000000000000aaa000000a000aa0000000000000
0000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666660000a00000000a0000a0000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000aaa00a00aaa0aaa0000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666666666666000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000eee00000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000eee00000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000eee00000000000666666666666666666666666666666666666666666666666666666666666666666666666000000000000000000000000
0000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000006666666666666666666666666666666666666666666666666666666666666666000000eee00000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000
000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000eeeee0000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eee00000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eee00000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000000000000000
00000000000000000000000000000000666666666666666666666666666666666666666666666666666666666eeeee6600000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeee0000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eee00000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000aaa00000aaa00000000000000000
000000000000000000000000000000006666666666666666666666666666666666666666666666666666666666666666000000a00000a0000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000aaa00000aaa00000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a000000000a00000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000aaa00a00aaa00000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000e0000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000
000000eee00000000000000000000000666666666666666666666666666666666666666666666666666666666666666600000000000000000000000000000000
0000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000066666666666666666666666666666666666666666666666666666666666666666666666600000000000000000eee0000

__map__
0000000001010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000201010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100001f2202122023220252102621027210272102821028210272102621024210222101e2201d2200000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100001232012320113201132000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100002412022120211201f1201d1201c1201a12018120171101511015110151200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
