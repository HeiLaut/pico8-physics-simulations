pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
--sIMULATION bROWNSCHE rOEHRE
--BY hEINRICH lAUTERBACH

	function _init()
	 particle={}
	 dauerfeuer=false
	 c={0,0,10} --1-u_b, 2-u_a, 3-d
	 i_c=1 --kontrolle der einstellbaren groesse
	 c1={ --kondensator laengsfeld
  x1=2,
  x2=20,
  y1=64-10,
  y2=64+10
  }
  c2={--kondensator querfeld
  x1=40,
  x2=80,
  ym=64
  }
  drawcontrols=true
	end
	
	function _update60()
	 if (dauerfeuer) create_part(1)
	 foreach(particle,update_part)
	 controls()


	end
	
	function _draw()
	 cls(1)
	 map()
	 draw_controls()
	 draw_condensators()
	 foreach(particle,draw_part)

	end
	
	function create_part(n)
	 for i=1,n do
	  local c={
	   x=5-rnd(0.1)+rnd(0.1),
	   y=64,
	   dx=0,
	   dy=0,
	   lt=400
	   }
	  add(particle,c)
	  end
	end
	   

function round(z,d)
 return flr((z)*d)/d
end


-->8
--updates
function update_part(obj)

 if (obj.x<c1.x2) then obj.dx+=c[1]/100
 elseif (obj.x>c2.x1 and obj.x<c2.x2) then
  obj.dy+=c[2]/20/c[3]
 end
 obj.x+=obj.dx
 obj.y+=obj.dy
 obj.lt-=1
 if (obj.lt<0 or (obj.x<81 and (obj.y<c2.ym-c[3] or obj.y>c2.ym+c[3]))) del(particle,obj)
end

function controls()
		local f=0.5
		if (btnp(‚û°Ô∏è) and i_c<#c) i_c+=1
		if (btnp(‚¨ÖÔ∏è) and i_c>1) i_c-=1
		if (i_c==2) f=1.5625/2
		if (i_c==3) f=2
		if (btnp(‚¨ÜÔ∏è)) c[i_c]+=f
	 if (btnp(‚¨áÔ∏è)) c[i_c]-=f
	 if (btnp(‚ùé)) create_part(1)
	 if (btnp(üÖæÔ∏è)) then
	  if dauerfeuer then dauerfeuer=false
	  else dauerfeuer=true
	  end
	 end
  c[1]=mid(0,c[1],9)
  c[3]=mid(2,c[3],50)
  c[2]=mid(-5*1.5625,c[2],5*1.5625)
	 
end
-->8
--draws
function draw_part(obj)
 pset(obj.x,obj.y,12)
end

function draw_controls()
 rectfill(0,0,128,7,8)
 if (i_c == 1) rectfill(7,0,24,7,10)
 if (i_c == 2) rectfill(47,0,64,7,10)
 if (i_c == 3) rectfill(94,0,101,7,10)
 print("u_b:"..round(c[1]*100,1).."v",10,1,2)
 print("u_a:"..(round(c[2]/0.015625,1)).."v",50,1,2)
 print("d:"..round(c[3],10).."mm",95,1,2)
 if drawcontrols then
	 print("‚¨ÖÔ∏è‚û°Ô∏è - groesse wechseln",14,10,8)
	 print("‚¨ÜÔ∏è‚¨áÔ∏è - groesse einstellen",14,17,8)
	 print("c/üÖæÔ∏è - elektronenstrahl ein/aus",2.5,114,8)
	 print("x/‚ùé - einzelektron start",2.5,121,8)
	end
end

function draw_condensators()
-- color of the condensator 2

 if (c[1]==0) then f_1,f_2=7,7
 else f_1,f_2=12,8 end
 
 rectfill(c1.x1,c1.y1,c1.x1,c1.y2,f_1)
 rectfill(c1.x2,c1.y1,c1.x2,c1.y1+7,f_2)
 rectfill(c1.x2,c1.y2-7,c1.x2,c1.y2,f_2)

-- color of the condensator 2
-- white/blue/red
 if (c[2] < 0) then
   f_1,f_2 = 8,12
 elseif (c[2] > 0) then
   f_1,f_2 = 12,8
 else
   f_1,f_2=7,7
 end
 fillp(0b0111111111111111.1)
 rectfill(c2.x1,c2.ym-c[3],c2.x2,c2.ym+c[3],6)
 fillp()
 rectfill(c2.x1,c2.ym-c[3],c2.x2,c2.ym-c[3],f_1)
 rectfill(c2.x1,c2.ym+c[3],c2.x2,c2.ym+c[3],f_2)
 
end
-->8
--menu

menuitem(1,"toggle controls",function()
 print(drawcontrols,20,20)
	if drawcontrols then drawcontrols=false
	else drawcontrols=true
	end
end)

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888aaaaaaaa88888888888888888888888888
8888888888282888882228888822282228222828288888888828288888222888882288222822282828888888888888a22aaaaa82288222822282228888888888
8888888888282888882828828888282828282828288888888828288888282882888288282828282828888888888888a2a2aa2a88288882822282228888888888
8888888888282888882288888822282828282828288888888828288888222888888288282828282828888888888888a2a2aaaa88288222828282828888888888
8888888888282888882828828828882828282822288888888828288888282882888288282828282228888888888888a2a2aa2a88288288828282828888888888
8888888888822822282228888822282228222882888888888882282228282888882228222822288288888888888888a222aaaa82228222828282828888888888
8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888aaaaaaaa88888888888888888888888888
8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888aaaaaaaa88888888888888888888888888
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111188888111888881111111111111118818881188188811881188188811111818188811881818118818881811188111111111111111111111111
11111111111111888118818811888111111111111181118181818181118111811181111111818181118111818181118111811181811111111111111111111111
11111111111111881118818811188111118881111181118811818188118881888188111111818188118111888188818811811181811111111111111111111111
11111111111111888118818811888111111111111181818181818181111181118181111111888181118111818111818111811181811111111111111111111111
11111111111111188888111888881111111111111188818181881188818811881188811111888188811881818188118881888181811111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111188888111888881111111111111118818881188188811881188188811111888188818811188188818881811181118881881111111111111111
11111111111111888188818811188111111111111181118181818181118111811181111111811118118181811118118111811181118111818111111111111111
11111111111111881118818811188111118881111181118811818188118881888188111111881118118181888118118811811181118811818111111111111111
11111111111111881118818881888111111111111181818181818181111181118181111111811118118181118118118111811181118111818111111111111111
11111111111111188888111888881111111111111188818181881188818811881188811111888188818181881118118881888188818881818111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1111111111111111111111111111111111111111ccccccccccccccccccccccccccccccccccccccccc11111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111116111611161116111611161116111611161116111611111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111116111611161116111611161116111611161116111611111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11c11ccccccccccccccccccccccccccccccccccccccccccccccccc11611161116111611161116111611111111111111111111111111111111111111111111111
11c111111111111111111111111111111111111111111111111111ccccc111111111111111111111111111111111111111111111111111111111111111111111
11c11111111111111111111111111111111111111111111111111111111cccc11111111111111111111111111111111111111111111111111111111111111111
11c111111111111111118111111111111111111111111111111111111111111cccc1111111111111111111111111111111111111111111111111111111111111
11c1111111111111111181111111111111111111611161116111611161116111611ccc1161116111611111111111111111111111111111111111111111111111
11c1111111111111111181111111111111111111111111111111111111111111111111ccc1111111111111111111111111111111111111111111111111111111
11c1111111111111111181111111111111111111111111111111111111111111111111111ccc1111111111111111111111111111111111111111111111111111
11c111111111111111118111111111111111111111111111111111111111111111111111111cccc1111111111111111111111111111111111111111111111111
11c1111111111111111181111111111111111111611161116111611161116111611161116111611cc11111111111111111111111111111111111111111111111
11c111111111111111118111111111111111111111111111111111111111111111111111111111111cc111111111111111111111111111111111111111111111
11c11111111111111111811111111111111111111111111111111111111111111111111111111111111ccc111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111cc1111111111111111111111111111111111111111
1111111111111111111111111111111111111111888888888888888888888888888888888888888881111111cc11111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccc111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cc1111111111111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111ccc1111111111111111111111111111111
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cc11111111111111111111111111111
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111cc111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111c11111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111881111111111111888181118881818188818881188188118881881118818881888188818181811111118881888188111181888181811881111111
11111111118111111111111111811181118111818118118181818181818111818181111811818181818181811111118111181181811811818181818111111111
11111111118111111188811111881181118811881118118811818181818811818188811811881188818881811111118811181181811811888181818881111111
11111111118111111111111111811181118111818118118181818181818111818111811811818181818181811111118111181181811811818181811181111111
11111111111881111111111111888188818881818118118181881181818881818188111811818181818181888111118881888181818111818118818811111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111118181111111111111888188818811888188818111888181818881888118818811111118818881888188818881111111111111111111111111111111
11111111118181111111111111811118118181118181118111811181811811818181818181111181111811818181811811111111111111111111111111111111
11111111111811111188811111881118118181181188118111881188111811881181818181111188811811888188111811111111111111111111111111111111
11111111118181111111111111811118118181811181118111811181811811818181818181111111811811818181811811111111111111111111111111111111
11111111118181111111111111888188818181888188818881888181811811818188118181111188111811818181811811111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111

